{"version":3,"file":"jsonMode.05ab9345.js","sources":["../../node_modules/monaco-editor/esm/vs/language/json/workerManager.js","../../node_modules/monaco-editor/esm/vs/language/json/languageFeatures.js","../../node_modules/monaco-editor/esm/vs/language/json/tokenization.js","../../node_modules/monaco-editor/esm/vs/language/json/jsonMode.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { editor } from './fillers/monaco-editor-core.js';\r\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1000; // 2min\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(defaults) {\r\n        var _this = this;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\r\n        this._lastUsedTime = 0;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        clearInterval(this._idleCheckInterval);\r\n        this._configChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._checkIfIdle = function () {\r\n        if (!this._worker) {\r\n            return;\r\n        }\r\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n        if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\r\n            this._stopWorker();\r\n        }\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        this._lastUsedTime = Date.now();\r\n        if (!this._client) {\r\n            this._worker = editor.createWebWorker({\r\n                // module that exports the create() method and returns a `JSONWorker` instance\r\n                moduleId: 'vs/language/json/jsonWorker',\r\n                label: this._defaults.languageId,\r\n                // passed in to the create() method\r\n                createData: {\r\n                    languageSettings: this._defaults.diagnosticsOptions,\r\n                    languageId: this._defaults.languageId,\r\n                    enableSchemaRequest: this._defaults.diagnosticsOptions.enableSchemaRequest\r\n                }\r\n            });\r\n            this._client = this._worker.getProxy();\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient()\r\n            .then(function (client) {\r\n            _client = client;\r\n        })\r\n            .then(function (_) {\r\n            return _this._worker.withSyncedResources(resources);\r\n        })\r\n            .then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { Uri, Range, editor, languages, MarkerSeverity } from './fillers/monaco-editor-core.js';\r\nimport * as jsonService from './_deps/vscode-json-languageservice/jsonLanguageService.js';\r\n// --- diagnostics --- ---\r\nvar DiagnosticsAdapter = /** @class */ (function () {\r\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\r\n        var _this = this;\r\n        this._languageId = _languageId;\r\n        this._worker = _worker;\r\n        this._disposables = [];\r\n        this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            var modeId = model.getModeId();\r\n            if (modeId !== _this._languageId) {\r\n                return;\r\n            }\r\n            var handle;\r\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\r\n            });\r\n            _this._doValidate(model.uri, modeId);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            editor.setModelMarkers(model, _this._languageId, []);\r\n            var uriStr = model.uri.toString();\r\n            var listener = _this._listener[uriStr];\r\n            if (listener) {\r\n                listener.dispose();\r\n                delete _this._listener[uriStr];\r\n            }\r\n        };\r\n        this._disposables.push(editor.onDidCreateModel(onModelAdd));\r\n        this._disposables.push(editor.onWillDisposeModel(function (model) {\r\n            onModelRemoved(model);\r\n            _this._resetSchema(model.uri);\r\n        }));\r\n        this._disposables.push(editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n            _this._resetSchema(event.model.uri);\r\n        }));\r\n        this._disposables.push(defaults.onDidChange(function (_) {\r\n            editor.getModels().forEach(function (model) {\r\n                if (model.getModeId() === _this._languageId) {\r\n                    onModelRemoved(model);\r\n                    onModelAdd(model);\r\n                }\r\n            });\r\n        }));\r\n        this._disposables.push({\r\n            dispose: function () {\r\n                editor.getModels().forEach(onModelRemoved);\r\n                for (var key in _this._listener) {\r\n                    _this._listener[key].dispose();\r\n                }\r\n            }\r\n        });\r\n        editor.getModels().forEach(onModelAdd);\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._resetSchema = function (resource) {\r\n        this._worker().then(function (worker) {\r\n            worker.resetSchema(resource.toString());\r\n        });\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\r\n        this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\r\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\r\n                var model = editor.getModel(resource);\r\n                if (model && model.getModeId() === languageId) {\r\n                    editor.setModelMarkers(model, languageId, markers);\r\n                }\r\n            });\r\n        })\r\n            .then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    return DiagnosticsAdapter;\r\n}());\r\nexport { DiagnosticsAdapter };\r\nfunction toSeverity(lsSeverity) {\r\n    switch (lsSeverity) {\r\n        case jsonService.DiagnosticSeverity.Error:\r\n            return MarkerSeverity.Error;\r\n        case jsonService.DiagnosticSeverity.Warning:\r\n            return MarkerSeverity.Warning;\r\n        case jsonService.DiagnosticSeverity.Information:\r\n            return MarkerSeverity.Info;\r\n        case jsonService.DiagnosticSeverity.Hint:\r\n            return MarkerSeverity.Hint;\r\n        default:\r\n            return MarkerSeverity.Info;\r\n    }\r\n}\r\nfunction toDiagnostics(resource, diag) {\r\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\r\n    return {\r\n        severity: toSeverity(diag.severity),\r\n        startLineNumber: diag.range.start.line + 1,\r\n        startColumn: diag.range.start.character + 1,\r\n        endLineNumber: diag.range.end.line + 1,\r\n        endColumn: diag.range.end.character + 1,\r\n        message: diag.message,\r\n        code: code,\r\n        source: diag.source\r\n    };\r\n}\r\n// --- completion ------\r\nfunction fromPosition(position) {\r\n    if (!position) {\r\n        return void 0;\r\n    }\r\n    return { character: position.column - 1, line: position.lineNumber - 1 };\r\n}\r\nfunction fromRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        start: {\r\n            line: range.startLineNumber - 1,\r\n            character: range.startColumn - 1\r\n        },\r\n        end: { line: range.endLineNumber - 1, character: range.endColumn - 1 }\r\n    };\r\n}\r\nfunction toRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\r\n}\r\nfunction isInsertReplaceEdit(edit) {\r\n    return (typeof edit.insert !== 'undefined' &&\r\n        typeof edit.replace !== 'undefined');\r\n}\r\nfunction toCompletionItemKind(kind) {\r\n    var mItemKind = languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case jsonService.CompletionItemKind.Text:\r\n            return mItemKind.Text;\r\n        case jsonService.CompletionItemKind.Method:\r\n            return mItemKind.Method;\r\n        case jsonService.CompletionItemKind.Function:\r\n            return mItemKind.Function;\r\n        case jsonService.CompletionItemKind.Constructor:\r\n            return mItemKind.Constructor;\r\n        case jsonService.CompletionItemKind.Field:\r\n            return mItemKind.Field;\r\n        case jsonService.CompletionItemKind.Variable:\r\n            return mItemKind.Variable;\r\n        case jsonService.CompletionItemKind.Class:\r\n            return mItemKind.Class;\r\n        case jsonService.CompletionItemKind.Interface:\r\n            return mItemKind.Interface;\r\n        case jsonService.CompletionItemKind.Module:\r\n            return mItemKind.Module;\r\n        case jsonService.CompletionItemKind.Property:\r\n            return mItemKind.Property;\r\n        case jsonService.CompletionItemKind.Unit:\r\n            return mItemKind.Unit;\r\n        case jsonService.CompletionItemKind.Value:\r\n            return mItemKind.Value;\r\n        case jsonService.CompletionItemKind.Enum:\r\n            return mItemKind.Enum;\r\n        case jsonService.CompletionItemKind.Keyword:\r\n            return mItemKind.Keyword;\r\n        case jsonService.CompletionItemKind.Snippet:\r\n            return mItemKind.Snippet;\r\n        case jsonService.CompletionItemKind.Color:\r\n            return mItemKind.Color;\r\n        case jsonService.CompletionItemKind.File:\r\n            return mItemKind.File;\r\n        case jsonService.CompletionItemKind.Reference:\r\n            return mItemKind.Reference;\r\n    }\r\n    return mItemKind.Property;\r\n}\r\nfunction fromCompletionItemKind(kind) {\r\n    var mItemKind = languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case mItemKind.Text:\r\n            return jsonService.CompletionItemKind.Text;\r\n        case mItemKind.Method:\r\n            return jsonService.CompletionItemKind.Method;\r\n        case mItemKind.Function:\r\n            return jsonService.CompletionItemKind.Function;\r\n        case mItemKind.Constructor:\r\n            return jsonService.CompletionItemKind.Constructor;\r\n        case mItemKind.Field:\r\n            return jsonService.CompletionItemKind.Field;\r\n        case mItemKind.Variable:\r\n            return jsonService.CompletionItemKind.Variable;\r\n        case mItemKind.Class:\r\n            return jsonService.CompletionItemKind.Class;\r\n        case mItemKind.Interface:\r\n            return jsonService.CompletionItemKind.Interface;\r\n        case mItemKind.Module:\r\n            return jsonService.CompletionItemKind.Module;\r\n        case mItemKind.Property:\r\n            return jsonService.CompletionItemKind.Property;\r\n        case mItemKind.Unit:\r\n            return jsonService.CompletionItemKind.Unit;\r\n        case mItemKind.Value:\r\n            return jsonService.CompletionItemKind.Value;\r\n        case mItemKind.Enum:\r\n            return jsonService.CompletionItemKind.Enum;\r\n        case mItemKind.Keyword:\r\n            return jsonService.CompletionItemKind.Keyword;\r\n        case mItemKind.Snippet:\r\n            return jsonService.CompletionItemKind.Snippet;\r\n        case mItemKind.Color:\r\n            return jsonService.CompletionItemKind.Color;\r\n        case mItemKind.File:\r\n            return jsonService.CompletionItemKind.File;\r\n        case mItemKind.Reference:\r\n            return jsonService.CompletionItemKind.Reference;\r\n    }\r\n    return jsonService.CompletionItemKind.Property;\r\n}\r\nfunction toTextEdit(textEdit) {\r\n    if (!textEdit) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        range: toRange(textEdit.range),\r\n        text: textEdit.newText\r\n    };\r\n}\r\nvar CompletionAdapter = /** @class */ (function () {\r\n    function CompletionAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return [' ', ':'];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doComplete(resource.toString(), fromPosition(position));\r\n        })\r\n            .then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var wordInfo = model.getWordUntilPosition(position);\r\n            var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n            var items = info.items.map(function (entry) {\r\n                var item = {\r\n                    label: entry.label,\r\n                    insertText: entry.insertText || entry.label,\r\n                    sortText: entry.sortText,\r\n                    filterText: entry.filterText,\r\n                    documentation: entry.documentation,\r\n                    detail: entry.detail,\r\n                    range: wordRange,\r\n                    kind: toCompletionItemKind(entry.kind)\r\n                };\r\n                if (entry.textEdit) {\r\n                    if (isInsertReplaceEdit(entry.textEdit)) {\r\n                        item.range = {\r\n                            insert: toRange(entry.textEdit.insert),\r\n                            replace: toRange(entry.textEdit.replace)\r\n                        };\r\n                    }\r\n                    else {\r\n                        item.range = toRange(entry.textEdit.range);\r\n                    }\r\n                    item.insertText = entry.textEdit.newText;\r\n                }\r\n                if (entry.additionalTextEdits) {\r\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                if (entry.insertTextFormat === jsonService.InsertTextFormat.Snippet) {\r\n                    item.insertTextRules = languages.CompletionItemInsertTextRule.InsertAsSnippet;\r\n                }\r\n                return item;\r\n            });\r\n            return {\r\n                isIncomplete: info.isIncomplete,\r\n                suggestions: items\r\n            };\r\n        });\r\n    };\r\n    return CompletionAdapter;\r\n}());\r\nexport { CompletionAdapter };\r\nfunction isMarkupContent(thing) {\r\n    return (thing &&\r\n        typeof thing === 'object' &&\r\n        typeof thing.kind === 'string');\r\n}\r\nfunction toMarkdownString(entry) {\r\n    if (typeof entry === 'string') {\r\n        return {\r\n            value: entry\r\n        };\r\n    }\r\n    if (isMarkupContent(entry)) {\r\n        if (entry.kind === 'plaintext') {\r\n            return {\r\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            };\r\n        }\r\n        return {\r\n            value: entry.value\r\n        };\r\n    }\r\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\r\n}\r\nfunction toMarkedStringArray(contents) {\r\n    if (!contents) {\r\n        return void 0;\r\n    }\r\n    if (Array.isArray(contents)) {\r\n        return contents.map(toMarkdownString);\r\n    }\r\n    return [toMarkdownString(contents)];\r\n}\r\n// --- hover ------\r\nvar HoverAdapter = /** @class */ (function () {\r\n    function HoverAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doHover(resource.toString(), fromPosition(position));\r\n        })\r\n            .then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            return {\r\n                range: toRange(info.range),\r\n                contents: toMarkedStringArray(info.contents)\r\n            };\r\n        });\r\n    };\r\n    return HoverAdapter;\r\n}());\r\nexport { HoverAdapter };\r\n// --- definition ------\r\nfunction toLocation(location) {\r\n    return {\r\n        uri: Uri.parse(location.uri),\r\n        range: toRange(location.range)\r\n    };\r\n}\r\n// --- document symbols ------\r\nfunction toSymbolKind(kind) {\r\n    var mKind = languages.SymbolKind;\r\n    switch (kind) {\r\n        case jsonService.SymbolKind.File:\r\n            return mKind.Array;\r\n        case jsonService.SymbolKind.Module:\r\n            return mKind.Module;\r\n        case jsonService.SymbolKind.Namespace:\r\n            return mKind.Namespace;\r\n        case jsonService.SymbolKind.Package:\r\n            return mKind.Package;\r\n        case jsonService.SymbolKind.Class:\r\n            return mKind.Class;\r\n        case jsonService.SymbolKind.Method:\r\n            return mKind.Method;\r\n        case jsonService.SymbolKind.Property:\r\n            return mKind.Property;\r\n        case jsonService.SymbolKind.Field:\r\n            return mKind.Field;\r\n        case jsonService.SymbolKind.Constructor:\r\n            return mKind.Constructor;\r\n        case jsonService.SymbolKind.Enum:\r\n            return mKind.Enum;\r\n        case jsonService.SymbolKind.Interface:\r\n            return mKind.Interface;\r\n        case jsonService.SymbolKind.Function:\r\n            return mKind.Function;\r\n        case jsonService.SymbolKind.Variable:\r\n            return mKind.Variable;\r\n        case jsonService.SymbolKind.Constant:\r\n            return mKind.Constant;\r\n        case jsonService.SymbolKind.String:\r\n            return mKind.String;\r\n        case jsonService.SymbolKind.Number:\r\n            return mKind.Number;\r\n        case jsonService.SymbolKind.Boolean:\r\n            return mKind.Boolean;\r\n        case jsonService.SymbolKind.Array:\r\n            return mKind.Array;\r\n    }\r\n    return mKind.Function;\r\n}\r\nvar DocumentSymbolAdapter = /** @class */ (function () {\r\n    function DocumentSymbolAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.findDocumentSymbols(resource.toString()); })\r\n            .then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                name: item.name,\r\n                detail: '',\r\n                containerName: item.containerName,\r\n                kind: toSymbolKind(item.kind),\r\n                range: toRange(item.location.range),\r\n                selectionRange: toRange(item.location.range),\r\n                tags: []\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentSymbolAdapter;\r\n}());\r\nexport { DocumentSymbolAdapter };\r\nfunction fromFormattingOptions(options) {\r\n    return {\r\n        tabSize: options.tabSize,\r\n        insertSpaces: options.insertSpaces\r\n    };\r\n}\r\nvar DocumentFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker\r\n                .format(resource.toString(), null, fromFormattingOptions(options))\r\n                .then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentFormattingEditProvider;\r\n}());\r\nexport { DocumentFormattingEditProvider };\r\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentRangeFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker\r\n                .format(resource.toString(), fromRange(range), fromFormattingOptions(options))\r\n                .then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentRangeFormattingEditProvider;\r\n}());\r\nexport { DocumentRangeFormattingEditProvider };\r\nvar DocumentColorAdapter = /** @class */ (function () {\r\n    function DocumentColorAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentColorAdapter.prototype.provideDocumentColors = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.findDocumentColors(resource.toString()); })\r\n            .then(function (infos) {\r\n            if (!infos) {\r\n                return;\r\n            }\r\n            return infos.map(function (item) { return ({\r\n                color: item.color,\r\n                range: toRange(item.range)\r\n            }); });\r\n        });\r\n    };\r\n    DocumentColorAdapter.prototype.provideColorPresentations = function (model, info, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.getColorPresentations(resource.toString(), info.color, fromRange(info.range));\r\n        })\r\n            .then(function (presentations) {\r\n            if (!presentations) {\r\n                return;\r\n            }\r\n            return presentations.map(function (presentation) {\r\n                var item = {\r\n                    label: presentation.label\r\n                };\r\n                if (presentation.textEdit) {\r\n                    item.textEdit = toTextEdit(presentation.textEdit);\r\n                }\r\n                if (presentation.additionalTextEdits) {\r\n                    item.additionalTextEdits = presentation.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                return item;\r\n            });\r\n        });\r\n    };\r\n    return DocumentColorAdapter;\r\n}());\r\nexport { DocumentColorAdapter };\r\nvar FoldingRangeAdapter = /** @class */ (function () {\r\n    function FoldingRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.getFoldingRanges(resource.toString(), context); })\r\n            .then(function (ranges) {\r\n            if (!ranges) {\r\n                return;\r\n            }\r\n            return ranges.map(function (range) {\r\n                var result = {\r\n                    start: range.startLine + 1,\r\n                    end: range.endLine + 1\r\n                };\r\n                if (typeof range.kind !== 'undefined') {\r\n                    result.kind = toFoldingRangeKind(range.kind);\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return FoldingRangeAdapter;\r\n}());\r\nexport { FoldingRangeAdapter };\r\nfunction toFoldingRangeKind(kind) {\r\n    switch (kind) {\r\n        case jsonService.FoldingRangeKind.Comment:\r\n            return languages.FoldingRangeKind.Comment;\r\n        case jsonService.FoldingRangeKind.Imports:\r\n            return languages.FoldingRangeKind.Imports;\r\n        case jsonService.FoldingRangeKind.Region:\r\n            return languages.FoldingRangeKind.Region;\r\n    }\r\n    return void 0;\r\n}\r\nvar SelectionRangeAdapter = /** @class */ (function () {\r\n    function SelectionRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition)); })\r\n            .then(function (selectionRanges) {\r\n            if (!selectionRanges) {\r\n                return;\r\n            }\r\n            return selectionRanges.map(function (selectionRange) {\r\n                var result = [];\r\n                while (selectionRange) {\r\n                    result.push({ range: toRange(selectionRange.range) });\r\n                    selectionRange = selectionRange.parent;\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return SelectionRangeAdapter;\r\n}());\r\nexport { SelectionRangeAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as json from './_deps/jsonc-parser/main.js';\r\nexport function createTokenizationSupport(supportComments) {\r\n    return {\r\n        getInitialState: function () { return new JSONState(null, null, false, null); },\r\n        tokenize: function (line, state, offsetDelta, stopAtOffset) {\r\n            return tokenize(supportComments, line, state, offsetDelta, stopAtOffset);\r\n        }\r\n    };\r\n}\r\nexport var TOKEN_DELIM_OBJECT = 'delimiter.bracket.json';\r\nexport var TOKEN_DELIM_ARRAY = 'delimiter.array.json';\r\nexport var TOKEN_DELIM_COLON = 'delimiter.colon.json';\r\nexport var TOKEN_DELIM_COMMA = 'delimiter.comma.json';\r\nexport var TOKEN_VALUE_BOOLEAN = 'keyword.json';\r\nexport var TOKEN_VALUE_NULL = 'keyword.json';\r\nexport var TOKEN_VALUE_STRING = 'string.value.json';\r\nexport var TOKEN_VALUE_NUMBER = 'number.json';\r\nexport var TOKEN_PROPERTY_NAME = 'string.key.json';\r\nexport var TOKEN_COMMENT_BLOCK = 'comment.block.json';\r\nexport var TOKEN_COMMENT_LINE = 'comment.line.json';\r\nvar ParentsStack = /** @class */ (function () {\r\n    function ParentsStack(parent, type) {\r\n        this.parent = parent;\r\n        this.type = type;\r\n    }\r\n    ParentsStack.pop = function (parents) {\r\n        if (parents) {\r\n            return parents.parent;\r\n        }\r\n        return null;\r\n    };\r\n    ParentsStack.push = function (parents, type) {\r\n        return new ParentsStack(parents, type);\r\n    };\r\n    ParentsStack.equals = function (a, b) {\r\n        if (!a && !b) {\r\n            return true;\r\n        }\r\n        if (!a || !b) {\r\n            return false;\r\n        }\r\n        while (a && b) {\r\n            if (a === b) {\r\n                return true;\r\n            }\r\n            if (a.type !== b.type) {\r\n                return false;\r\n            }\r\n            a = a.parent;\r\n            b = b.parent;\r\n        }\r\n        return true;\r\n    };\r\n    return ParentsStack;\r\n}());\r\nvar JSONState = /** @class */ (function () {\r\n    function JSONState(state, scanError, lastWasColon, parents) {\r\n        this._state = state;\r\n        this.scanError = scanError;\r\n        this.lastWasColon = lastWasColon;\r\n        this.parents = parents;\r\n    }\r\n    JSONState.prototype.clone = function () {\r\n        return new JSONState(this._state, this.scanError, this.lastWasColon, this.parents);\r\n    };\r\n    JSONState.prototype.equals = function (other) {\r\n        if (other === this) {\r\n            return true;\r\n        }\r\n        if (!other || !(other instanceof JSONState)) {\r\n            return false;\r\n        }\r\n        return (this.scanError === other.scanError &&\r\n            this.lastWasColon === other.lastWasColon &&\r\n            ParentsStack.equals(this.parents, other.parents));\r\n    };\r\n    JSONState.prototype.getStateData = function () {\r\n        return this._state;\r\n    };\r\n    JSONState.prototype.setStateData = function (state) {\r\n        this._state = state;\r\n    };\r\n    return JSONState;\r\n}());\r\nfunction tokenize(comments, line, state, offsetDelta, stopAtOffset) {\r\n    if (offsetDelta === void 0) { offsetDelta = 0; }\r\n    // handle multiline strings and block comments\r\n    var numberOfInsertedCharacters = 0;\r\n    var adjustOffset = false;\r\n    switch (state.scanError) {\r\n        case 2 /* UnexpectedEndOfString */:\r\n            line = '\"' + line;\r\n            numberOfInsertedCharacters = 1;\r\n            break;\r\n        case 1 /* UnexpectedEndOfComment */:\r\n            line = '/*' + line;\r\n            numberOfInsertedCharacters = 2;\r\n            break;\r\n    }\r\n    var scanner = json.createScanner(line);\r\n    var lastWasColon = state.lastWasColon;\r\n    var parents = state.parents;\r\n    var ret = {\r\n        tokens: [],\r\n        endState: state.clone()\r\n    };\r\n    while (true) {\r\n        var offset = offsetDelta + scanner.getPosition();\r\n        var type = '';\r\n        var kind = scanner.scan();\r\n        if (kind === 17 /* EOF */) {\r\n            break;\r\n        }\r\n        // Check that the scanner has advanced\r\n        if (offset === offsetDelta + scanner.getPosition()) {\r\n            throw new Error('Scanner did not advance, next 3 characters are: ' + line.substr(scanner.getPosition(), 3));\r\n        }\r\n        // In case we inserted /* or \" character, we need to\r\n        // adjust the offset of all tokens (except the first)\r\n        if (adjustOffset) {\r\n            offset -= numberOfInsertedCharacters;\r\n        }\r\n        adjustOffset = numberOfInsertedCharacters > 0;\r\n        // brackets and type\r\n        switch (kind) {\r\n            case 1 /* OpenBraceToken */:\r\n                parents = ParentsStack.push(parents, 0 /* Object */);\r\n                type = TOKEN_DELIM_OBJECT;\r\n                lastWasColon = false;\r\n                break;\r\n            case 2 /* CloseBraceToken */:\r\n                parents = ParentsStack.pop(parents);\r\n                type = TOKEN_DELIM_OBJECT;\r\n                lastWasColon = false;\r\n                break;\r\n            case 3 /* OpenBracketToken */:\r\n                parents = ParentsStack.push(parents, 1 /* Array */);\r\n                type = TOKEN_DELIM_ARRAY;\r\n                lastWasColon = false;\r\n                break;\r\n            case 4 /* CloseBracketToken */:\r\n                parents = ParentsStack.pop(parents);\r\n                type = TOKEN_DELIM_ARRAY;\r\n                lastWasColon = false;\r\n                break;\r\n            case 6 /* ColonToken */:\r\n                type = TOKEN_DELIM_COLON;\r\n                lastWasColon = true;\r\n                break;\r\n            case 5 /* CommaToken */:\r\n                type = TOKEN_DELIM_COMMA;\r\n                lastWasColon = false;\r\n                break;\r\n            case 8 /* TrueKeyword */:\r\n            case 9 /* FalseKeyword */:\r\n                type = TOKEN_VALUE_BOOLEAN;\r\n                lastWasColon = false;\r\n                break;\r\n            case 7 /* NullKeyword */:\r\n                type = TOKEN_VALUE_NULL;\r\n                lastWasColon = false;\r\n                break;\r\n            case 10 /* StringLiteral */:\r\n                var currentParent = parents ? parents.type : 0 /* Object */;\r\n                var inArray = currentParent === 1 /* Array */;\r\n                type =\r\n                    lastWasColon || inArray ? TOKEN_VALUE_STRING : TOKEN_PROPERTY_NAME;\r\n                lastWasColon = false;\r\n                break;\r\n            case 11 /* NumericLiteral */:\r\n                type = TOKEN_VALUE_NUMBER;\r\n                lastWasColon = false;\r\n                break;\r\n        }\r\n        // comments, iff enabled\r\n        if (comments) {\r\n            switch (kind) {\r\n                case 12 /* LineCommentTrivia */:\r\n                    type = TOKEN_COMMENT_LINE;\r\n                    break;\r\n                case 13 /* BlockCommentTrivia */:\r\n                    type = TOKEN_COMMENT_BLOCK;\r\n                    break;\r\n            }\r\n        }\r\n        ret.endState = new JSONState(state.getStateData(), scanner.getTokenError(), lastWasColon, parents);\r\n        ret.tokens.push({\r\n            startIndex: offset,\r\n            scopes: type\r\n        });\r\n    }\r\n    return ret;\r\n}\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nimport { createTokenizationSupport } from './tokenization.js';\r\nimport { languages } from './fillers/monaco-editor-core.js';\r\nexport function setupMode(defaults) {\r\n    var disposables = [];\r\n    var providers = [];\r\n    var client = new WorkerManager(defaults);\r\n    disposables.push(client);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    function registerProviders() {\r\n        var languageId = defaults.languageId, modeConfiguration = defaults.modeConfiguration;\r\n        disposeAll(providers);\r\n        if (modeConfiguration.documentFormattingEdits) {\r\n            providers.push(languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.documentRangeFormattingEdits) {\r\n            providers.push(languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.completionItems) {\r\n            providers.push(languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.hovers) {\r\n            providers.push(languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.documentSymbols) {\r\n            providers.push(languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.tokens) {\r\n            providers.push(languages.setTokensProvider(languageId, createTokenizationSupport(true)));\r\n        }\r\n        if (modeConfiguration.colors) {\r\n            providers.push(languages.registerColorProvider(languageId, new languageFeatures.DocumentColorAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.foldingRanges) {\r\n            providers.push(languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.diagnostics) {\r\n            providers.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\r\n        }\r\n        if (modeConfiguration.selectionRanges) {\r\n            providers.push(languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker)));\r\n        }\r\n    }\r\n    registerProviders();\r\n    disposables.push(languages.setLanguageConfiguration(defaults.languageId, richEditConfiguration));\r\n    var modeConfiguration = defaults.modeConfiguration;\r\n    defaults.onDidChange(function (newDefaults) {\r\n        if (newDefaults.modeConfiguration !== modeConfiguration) {\r\n            modeConfiguration = newDefaults.modeConfiguration;\r\n            registerProviders();\r\n        }\r\n    });\r\n    disposables.push(asDisposable(providers));\r\n    return asDisposable(disposables);\r\n}\r\nfunction asDisposable(disposables) {\r\n    return { dispose: function () { return disposeAll(disposables); } };\r\n}\r\nfunction disposeAll(disposables) {\r\n    while (disposables.length) {\r\n        disposables.pop().dispose();\r\n    }\r\n}\r\nvar richEditConfiguration = {\r\n    wordPattern: /(-?\\d*\\.\\d\\w*)|([^\\[\\{\\]\\}\\:\\\"\\,\\s]+)/g,\r\n    comments: {\r\n        lineComment: '//',\r\n        blockComment: ['/*', '*/']\r\n    },\r\n    brackets: [\r\n        ['{', '}'],\r\n        ['[', ']']\r\n    ],\r\n    autoClosingPairs: [\r\n        { open: '{', close: '}', notIn: ['string'] },\r\n        { open: '[', close: ']', notIn: ['string'] },\r\n        { open: '\"', close: '\"', notIn: ['string'] }\r\n    ]\r\n};\r\n"],"names":["WorkerManager","defaults","_this","this","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","Date","now","_getClient","editor","createWebWorker","moduleId","label","languageId","createData","languageSettings","diagnosticsOptions","enableSchemaRequest","getProxy","getLanguageServiceWorker","resources","_i","arguments","length","then","client","_","withSyncedResources","WorkerManager2","DiagnosticsAdapter","_languageId","_disposables","_listener","Object","create","onModelAdd","model","handle","modeId","getModeId","uri","toString","onDidChangeContent","setTimeout","_doValidate","onModelRemoved","setModelMarkers","uriStr","listener","push","onDidCreateModel","onWillDisposeModel","_resetSchema","onDidChangeModelLanguage","event","getModels","forEach","key","d","resource","worker","resetSchema","doValidation","diagnostics","markers","map","code","diag","String","severity","toSeverity","startLineNumber","range","start","line","startColumn","character","endLineNumber","end","endColumn","message","source","getModel","err","error","DiagnosticsAdapter2","lsSeverity","jsonService.DiagnosticSeverity","Error","MarkerSeverity","Warning","Information","Info","Hint","position","column","lineNumber","Range","kind","mItemKind","languages","CompletionItemKind","jsonService.CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","textEdit","toRange","text","newText","CompletionAdapter","defineProperty","CompletionAdapter2","get","enumerable","configurable","provideCompletionItems","context","token","doComplete","fromPosition","info","wordInfo","getWordUntilPosition","wordRange","items","entry","edit","item","insertText","sortText","filterText","documentation","detail","toCompletionItemKind","insert","replace","additionalTextEdits","toTextEdit","insertTextFormat","jsonService.InsertTextFormat","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","isIncomplete","suggestions","value","thing","language","contents","Array","isArray","toMarkdownString","HoverAdapter","provideHover","doHover","toMarkedStringArray","HoverAdapter2","mKind","SymbolKind","jsonService.SymbolKind","Namespace","Package","Constant","Number","Boolean","DocumentSymbolAdapter","provideDocumentSymbols","findDocumentSymbols","name","containerName","toSymbolKind","location","selectionRange","tags","DocumentSymbolAdapter2","options","tabSize","insertSpaces","DocumentFormattingEditProvider","provideDocumentFormattingEdits","format","fromFormattingOptions","edits","DocumentFormattingEditProvider2","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","fromRange","DocumentRangeFormattingEditProvider2","DocumentColorAdapter","provideDocumentColors","findDocumentColors","infos","color","provideColorPresentations","getColorPresentations","presentations","presentation","DocumentColorAdapter2","FoldingRangeAdapter","provideFoldingRanges","getFoldingRanges","ranges","result","startLine","endLine","jsonService.FoldingRangeKind","Comment","FoldingRangeKind","Imports","Region","toFoldingRangeKind","FoldingRangeAdapter2","SelectionRangeAdapter","provideSelectionRanges","positions","getSelectionRanges","selectionRanges","parent","SelectionRangeAdapter2","supportComments","getInitialState","JSONState","tokenize","state","offsetDelta","stopAtOffset","comments","numberOfInsertedCharacters","adjustOffset","scanError","scanner","json.createScanner","lastWasColon","parents","ret","tokens","endState","clone","offset","getPosition","type","scan","substr","ParentsStack","pop","currentParent","getStateData","getTokenError","startIndex","scopes","ParentsStack2","equals","a","b","_state","JSONState2","other","setStateData","disposables","providers","uris","apply","modeConfiguration2","modeConfiguration","documentFormattingEdits","registerDocumentFormattingEditProvider","languageFeatures.DocumentFormattingEditProvider","documentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","languageFeatures.DocumentRangeFormattingEditProvider","completionItems","registerCompletionItemProvider","languageFeatures.CompletionAdapter","hovers","registerHoverProvider","languageFeatures.HoverAdapter","documentSymbols","registerDocumentSymbolProvider","languageFeatures.DocumentSymbolAdapter","setTokensProvider","createTokenizationSupport","colors","registerColorProvider","languageFeatures.DocumentColorAdapter","foldingRanges","registerFoldingRangeProvider","languageFeatures.FoldingRangeAdapter","languageFeatures.DiagnosticsAdapter","registerSelectionRangeProvider","languageFeatures.SelectionRangeAdapter","setLanguageConfiguration","richEditConfiguration","newDefaults","asDisposable","disposeAll","wordPattern","lineComment","blockComment","brackets","autoClosingPairs","open","close","notIn"],"mappings":"yOAKA,IACIA,EAA+B,sBACRC,OACfC,EAAQC,UACPC,UAAYH,OACZI,QAAU,UACVC,mBAAqBC,aAAY,kBAAqBL,EAAMM,iBAAmB,UAC/EC,cAAgB,OAChBC,sBAAwBP,KAAKC,UAAUO,aAAY,kBAAqBT,EAAMU,0BAEzEC,UAAUD,YAAc,WAC9BT,KAAKE,eACAA,QAAQS,eACRT,QAAU,WAEdU,QAAU,QAELF,UAAUC,QAAU,yBAChBX,KAAKG,yBACdI,sBAAsBI,eACtBF,iBAEKC,UAAUL,aAAe,WAC9BL,KAAKE,UAGoBW,KAAKC,MAAQd,KAAKM,cA1B/B,WA4BRG,kBAGCC,UAAUK,WAAa,uBAC5BT,cAAgBO,KAAKC,MACrBd,KAAKY,eACDV,QAAUc,EAAOC,gBAAgB,CAElCC,SAAU,8BACVC,MAAOnB,KAAKC,UAAUmB,WAEtBC,WAAY,CACRC,iBAAkBtB,KAAKC,UAAUsB,mBACjCH,WAAYpB,KAAKC,UAAUmB,WAC3BI,oBAAqBxB,KAAKC,UAAUsB,mBAAmBC,4BAG1DZ,QAAUZ,KAAKE,QAAQuB,YAEzBzB,KAAKY,WAEFF,UAAUgB,yBAA2B,mBAM3Cd,EALAb,EAAQC,KACR2B,EAAY,GACPC,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,MAC1BA,GAAMC,UAAUD,UAGvB5B,KAAKe,aACPgB,MAAK,SAAUC,KACNA,KAETD,MAAK,SAAUE,UACTlC,EAAMG,QAAQgC,oBAAoBP,MAExCI,MAAK,SAAUE,UAAYrB,MAE7BuB,EAhEwB,GCC/BC,EAAoC,sBACRC,EAAanC,EAASJ,OAC1CC,EAAQC,UACPqC,YAAcA,OACdnC,QAAUA,OACVoC,aAAe,QACfC,UAAYC,OAAOC,OAAO,UAC3BC,EAAa,SAAUC,OAKnBC,EAJAC,EAASF,EAAMG,YACfD,IAAW9C,EAAMsC,gBAIfE,UAAUI,EAAMI,IAAIC,YAAcL,EAAMM,oBAAmB,wBAChDL,KACJM,YAAW,kBAAqBnD,EAAMoD,YAAYR,EAAMI,IAAKF,KAAY,UAEhFM,YAAYR,EAAMI,IAAKF,KAE7BO,EAAiB,SAAUT,KACpBU,gBAAgBV,EAAO5C,EAAMsC,YAAa,QAC7CiB,EAASX,EAAMI,IAAIC,WACnBO,EAAWxD,EAAMwC,UAAUe,GAC3BC,MACS5C,iBACFZ,EAAMwC,UAAUe,UAG1BhB,aAAakB,KAAKxC,EAAOyC,iBAAiBf,SAC1CJ,aAAakB,KAAKxC,EAAO0C,oBAAmB,SAAUf,KACxCA,KACTgB,aAAahB,EAAMI,cAExBT,aAAakB,KAAKxC,EAAO4C,0BAAyB,SAAUC,KAC9CA,EAAMlB,SACVkB,EAAMlB,SACXgB,aAAaE,EAAMlB,MAAMI,cAE9BT,aAAakB,KAAK1D,EAASU,aAAY,SAAUyB,KAC3C6B,YAAYC,SAAQ,SAAUpB,GAC7BA,EAAMG,cAAgB/C,EAAMsC,gBACbM,KACJA,gBAIlBL,aAAakB,KAAK,CACnB7C,QAAS,mBAEIqD,OADFF,YAAYC,QAAQX,GACXrD,EAAMwC,YACZA,UAAUyB,GAAKrD,eAI1BmD,YAAYC,QAAQrB,YAEZhC,UAAUC,QAAU,gBAC9B2B,aAAayB,SAAQ,SAAUE,UAAYA,GAAKA,EAAEtD,kBAClD2B,aAAe,MAEL5B,UAAUiD,aAAe,SAAUO,QAC7ChE,UAAU6B,MAAK,SAAUoC,KACnBC,YAAYF,EAASlB,kBAGjBtC,UAAUyC,YAAc,SAAUe,EAAU9C,QACtDlB,QAAQgE,GACRnC,MAAK,SAAUoC,UACTA,EAAOE,aAAaH,EAASlB,YAAYjB,MAAK,SAAUuC,OACvDC,EAAUD,EAAYE,KAAI,SAAUP,UA6BhDQ,EAA4B,iBADHC,EA5B2DT,GA6BjEQ,KAAoBE,OAAOD,EAAKD,MAAQC,EAAKD,KAC7D,CACHG,SAAUC,EAAWH,EAAKE,UAC1BE,gBAAiBJ,EAAKK,MAAMC,MAAMC,KAAO,EACzCC,YAAaR,EAAKK,MAAMC,MAAMG,UAAY,EAC1CC,cAAeV,EAAKK,MAAMM,IAAIJ,KAAO,EACrCK,UAAWZ,EAAKK,MAAMM,IAAIF,UAAY,EACtCI,QAASb,EAAKa,QACdd,KAAAA,EACAe,OAAQd,EAAKc,QAVrB,IAAiCd,EACzBD,KA5BY9B,EAAQ3B,EAAOyE,SAASvB,GACxBvB,GAASA,EAAMG,cAAgB1B,KACxBiC,gBAAgBV,EAAOvB,EAAYmD,SAIjDxC,UAAK,GAAW,SAAU2D,WACnBC,MAAMD,OAGfE,EAhF6B,GAmFxC,WAAoBC,UACRA,QACCC,EAA+BC,aACzBC,EAAeD,WACrBD,EAA+BG,eACzBD,EAAeC,aACrBH,EAA+BI,mBACzBF,EAAeG,UACrBL,EAA+BM,YACzBJ,EAAeI,oBAEfJ,EAAeG,MAiBlC,WAAsBE,MACbA,QAGE,CAAElB,UAAWkB,EAASC,OAAS,EAAGrB,KAAMoB,EAASE,WAAa,GAEzE,WAAmBxB,MACVA,QAGE,CACHC,MAAO,CACHC,KAAMF,EAAMD,gBAAkB,EAC9BK,UAAWJ,EAAMG,YAAc,GAEnCG,IAAK,CAAEJ,KAAMF,EAAMK,cAAgB,EAAGD,UAAWJ,EAAMO,UAAY,IAG3E,WAAiBP,MACRA,SAGE,IAAIyB,EAAMzB,EAAMC,MAAMC,KAAO,EAAGF,EAAMC,MAAMG,UAAY,EAAGJ,EAAMM,IAAIJ,KAAO,EAAGF,EAAMM,IAAIF,UAAY,GAMhH,WAA8BsB,OACtBC,EAAYC,EAAUC,0BAClBH,QACCI,EAA+BC,YACzBJ,EAAUI,UAChBD,EAA+BE,cACzBL,EAAUK,YAChBF,EAA+BG,gBACzBN,EAAUM,cAChBH,EAA+BI,mBACzBP,EAAUO,iBAChBJ,EAA+BK,aACzBR,EAAUQ,WAChBL,EAA+BM,gBACzBT,EAAUS,cAChBN,EAA+BO,aACzBV,EAAUU,WAChBP,EAA+BQ,iBACzBX,EAAUW,eAChBR,EAA+BS,cACzBZ,EAAUY,YAChBT,EAA+BU,gBACzBb,EAAUa,cAChBV,EAA+BW,YACzBd,EAAUc,UAChBX,EAA+BY,aACzBf,EAAUe,WAChBZ,EAA+Ba,YACzBhB,EAAUgB,UAChBb,EAA+Bc,eACzBjB,EAAUiB,aAChBd,EAA+Be,eACzBlB,EAAUkB,aAChBf,EAA+BgB,aACzBnB,EAAUmB,WAChBhB,EAA+BiB,YACzBpB,EAAUoB,UAChBjB,EAA+BkB,iBACzBrB,EAAUqB,iBAElBrB,EAAUa,SA4CrB,WAAoBS,MACXA,QAGE,CACHjD,MAAOkD,EAAQD,EAASjD,OACxBmD,KAAMF,EAASG,SAGvB,IAAIC,EAAmC,sBACRlI,QAClBA,QAAUA,gBAEZmI,eAAeC,EAAkB5H,UAAW,oBAAqB,CACpE6H,IAAK,iBACM,CAAC,IAAK,MAEjBC,YAAY,EACZC,cAAc,MAEA/H,UAAUgI,uBAAyB,SAAU/F,EAAO0D,EAAUsC,EAASC,OACjF1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UACTA,EAAO0E,WAAW3E,EAASlB,WAAY8F,EAAazC,OAE1DtE,MAAK,SAAUgH,MACXA,OAGDC,EAAWrG,EAAMsG,qBAAqB5C,GACtC6C,EAAY,IAAI1C,EAAMH,EAASE,WAAYyC,EAAS9D,YAAamB,EAASE,WAAYyC,EAAS1D,WAC/F6D,EAAQJ,EAAKI,MAAM3E,KAAI,SAAU4E,OAxHpBC,EAyHTC,EAAO,CACPnI,MAAOiI,EAAMjI,MACboI,WAAYH,EAAMG,YAAcH,EAAMjI,MACtCqI,SAAUJ,EAAMI,SAChBC,WAAYL,EAAMK,WAClBC,cAAeN,EAAMM,cACrBC,OAAQP,EAAMO,OACd5E,MAAOmE,EACPzC,KAAMmD,EAAqBR,EAAM3C,cAEjC2C,EAAMpB,gBAlIS,KADNqB,EAoIeD,EAAMpB,UAnI1B6B,aACQ,IAAjBR,EAAKS,UAmIS/E,MAAQ,CACT8E,OAAQ5B,EAAQmB,EAAMpB,SAAS6B,QAC/BC,QAAS7B,EAAQmB,EAAMpB,SAAS8B,YAI/B/E,MAAQkD,EAAQmB,EAAMpB,SAASjD,SAEnCwE,WAAaH,EAAMpB,SAASG,SAEjCiB,EAAMW,wBACDA,oBAAsBX,EAAMW,oBAAoBvF,IAAIwF,IAEzDZ,EAAMa,mBAAqBC,EAA6BtC,YACnDuC,gBAAkBxD,EAAUyD,6BAA6BC,iBAE3Df,WAEJ,CACHgB,aAAcvB,EAAKuB,aACnBC,YAAapB,QAIlBb,EA5D4B,GAoEvC,WAA0Bc,SACD,iBAAVA,EACA,CACHoB,MAAOpB,IARMqB,EAWDrB,IATC,iBAAVqB,GACe,iBAAfA,EAAMhE,KASM,cAAf2C,EAAM3C,KACC,CACH+D,MAAOpB,EAAMoB,MAAMV,QAAQ,wBAAyB,SAGrD,CACHU,MAAOpB,EAAMoB,OAGd,CAAEA,MAAO,MAAQpB,EAAMsB,SAAW,KAAOtB,EAAMoB,MAAQ,WArBlE,IAAyBC,EAuBzB,WAA6BE,MACpBA,SAGDC,MAAMC,QAAQF,GACPA,EAASnG,IAAIsG,GAEjB,CAACA,EAAiBH,IAG7B,IAAII,EAA8B,sBACR7K,QACbA,QAAUA,WAENQ,UAAUsK,aAAe,SAAUrI,EAAO0D,EAAUuC,OACzD1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UACTA,EAAO8G,QAAQ/G,EAASlB,WAAY8F,EAAazC,OAEvDtE,MAAK,SAAUgH,MACXA,QAGE,CACHhE,MAAOkD,EAAQc,EAAKhE,OACpB4F,SAAUO,EAAoBnC,EAAK4B,eAIxCQ,EApBuB,GA+BlC,WAAsB1E,OACd2E,EAAQzE,EAAU0E,kBACd5E,QACC6E,EAAuBxD,YACjBsD,EAAMR,WACZU,EAAuBhE,cACjB8D,EAAM9D,YACZgE,EAAuBC,iBACjBH,EAAMG,eACZD,EAAuBE,eACjBJ,EAAMI,aACZF,EAAuBlE,aACjBgE,EAAMhE,WACZkE,EAAuBvE,cACjBqE,EAAMrE,YACZuE,EAAuB/D,gBACjB6D,EAAM7D,cACZ+D,EAAuBpE,aACjBkE,EAAMlE,WACZoE,EAAuBrE,mBACjBmE,EAAMnE,iBACZqE,EAAuB5D,YACjB0D,EAAM1D,UACZ4D,EAAuBjE,iBACjB+D,EAAM/D,eACZiE,EAAuBtE,gBACjBoE,EAAMpE,cACZsE,EAAuBnE,gBACjBiE,EAAMjE,cACZmE,EAAuBG,gBACjBL,EAAMK,cACZH,EAAuB3G,cACjByG,EAAMzG,YACZ2G,EAAuBI,cACjBN,EAAMM,YACZJ,EAAuBK,eACjBP,EAAMO,aACZL,EAAuBV,aACjBQ,EAAMR,aAEdQ,EAAMpE,SAEjB,IAAI4E,EAAuC,sBACR1L,QACtBA,QAAUA,WAEGQ,UAAUmL,uBAAyB,SAAUlJ,EAAOiG,OAClE1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UAAiBA,EAAO2H,oBAAoB5H,EAASlB,eACpEjB,MAAK,SAAUoH,MACXA,SAGEA,EAAM3E,KAAI,SAAU8E,SAAgB,CACvCyC,KAAMzC,EAAKyC,KACXpC,OAAQ,GACRqC,cAAe1C,EAAK0C,cACpBvF,KAAMwF,EAAa3C,EAAK7C,MACxB1B,MAAOkD,EAAQqB,EAAK4C,SAASnH,OAC7BoH,eAAgBlE,EAAQqB,EAAK4C,SAASnH,OACtCqH,KAAM,WAIXC,EAvBgC,GA0B3C,WAA+BC,SACpB,CACHC,QAASD,EAAQC,QACjBC,aAAcF,EAAQE,cAG9B,IAAIC,EAAgD,sBACRvM,QAC/BA,QAAUA,WAEYQ,UAAUgM,+BAAiC,SAAU/J,EAAO2J,EAAS1D,OAC5F1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GAAUnC,MAAK,SAAUoC,UAClCA,EACFwI,OAAOzI,EAASlB,WAAY,KAAM4J,EAAsBN,IACxDvK,MAAK,SAAU8K,MACXA,GAA0B,IAAjBA,EAAM/K,cAGb+K,EAAMrI,IAAIwF,UAItB8C,EAjByC,GAoBhDC,EAAqD,sBACR7M,QACpCA,QAAUA,WAEiBQ,UAAUsM,oCAAsC,SAAUrK,EAAOoC,EAAOuH,EAAS1D,OAC7G1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GAAUnC,MAAK,SAAUoC,UAClCA,EACFwI,OAAOzI,EAASlB,WAAYiK,EAAUlI,GAAQ6H,EAAsBN,IACpEvK,MAAK,SAAU8K,MACXA,GAA0B,IAAjBA,EAAM/K,cAGb+K,EAAMrI,IAAIwF,UAItBkD,EAjB8C,GAoBrDC,EAAsC,sBACRjN,QACrBA,QAAUA,WAEEQ,UAAU0M,sBAAwB,SAAUzK,EAAOiG,OAChE1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UAAiBA,EAAOkJ,mBAAmBnJ,EAASlB,eACnEjB,MAAK,SAAUuL,MACXA,SAGEA,EAAM9I,KAAI,SAAU8E,SAAgB,CACvCiE,MAAOjE,EAAKiE,MACZxI,MAAOkD,EAAQqB,EAAKvE,iBAIXrE,UAAU8M,0BAA4B,SAAU7K,EAAOoG,EAAMH,OAC1E1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UACTA,EAAOsJ,sBAAsBvJ,EAASlB,WAAY+F,EAAKwE,MAAON,EAAUlE,EAAKhE,WAEnFhD,MAAK,SAAU2L,MACXA,SAGEA,EAAclJ,KAAI,SAAUmJ,OAC3BrE,EAAO,CACPnI,MAAOwM,EAAaxM,cAEpBwM,EAAa3F,aACRA,SAAWgC,EAAW2D,EAAa3F,WAExC2F,EAAa5D,wBACRA,oBAAsB4D,EAAa5D,oBAAoBvF,IAAIwF,IAE7DV,SAIZsE,EA1C+B,GA6CtCC,EAAqC,sBACR3N,QACpBA,QAAUA,WAECQ,UAAUoN,qBAAuB,SAAUnL,EAAOgG,EAASC,OACvE1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UAAiBA,EAAO4J,iBAAiB7J,EAASlB,WAAY2F,MAC7E5G,MAAK,SAAUiM,MACXA,SAGEA,EAAOxJ,KAAI,SAAUO,OACpBkJ,EAAS,CACTjJ,MAAOD,EAAMmJ,UAAY,EACzB7I,IAAKN,EAAMoJ,QAAU,eAEC,IAAfpJ,EAAM0B,SACNA,KAS3B,SAA4BA,UAChBA,QACC2H,EAA6BC,eACvB1H,EAAU2H,iBAAiBD,aACjCD,EAA6BG,eACvB5H,EAAU2H,iBAAiBC,aACjCH,EAA6BI,cACvB7H,EAAU2H,iBAAiBE,cAhBZC,CAAmB1J,EAAM0B,OAEpCwH,SAIZS,EAxB8B,GAsCzC,IAAIC,EAAuC,sBACRzO,QACtBA,QAAUA,WAEGQ,UAAUkO,uBAAyB,SAAUjM,EAAOkM,EAAWjG,OAC7E1E,EAAWvB,EAAMI,WACd/C,KAAKE,QAAQgE,GACfnC,MAAK,SAAUoC,UAAiBA,EAAO2K,mBAAmB5K,EAASlB,WAAY6L,EAAUrK,IAAIsE,OAC7F/G,MAAK,SAAUgN,MACXA,SAGEA,EAAgBvK,KAAI,SAAU2H,WAC7B8B,EAAS,GACN9B,KACI3I,KAAK,CAAEuB,MAAOkD,EAAQkE,EAAepH,WAC3BoH,EAAe6C,cAE7Bf,SAIZgB,EAtBgC,GC9iBpC,WAAmCC,SAC/B,CACHC,gBAAiB,kBAAqB,IAAIC,EAAU,KAAM,MAAM,EAAO,OACvEC,SAAU,SAAUpK,EAAMqK,EAAOC,EAAaC,UAgFtD,SAAkBC,EAAUxK,EAAMqK,EAAOC,EAAaC,QAC9B,IAAhBD,MAAwC,OAExCG,EAA6B,EAC7BC,GAAe,SACXL,EAAMM,gBACL,IACM,IAAM3K,IACgB,aAE5B,IACM,KAAOA,IACe,MAGjC4K,EAAUC,EAAmB7K,GAC7B8K,EAAeT,EAAMS,aACrBC,EAAUV,EAAMU,QAChBC,EAAM,CACNC,OAAQ,GACRC,SAAUb,EAAMc,gBAEP,KACLC,EAASd,EAAcM,EAAQS,cAC/BC,EAAO,GACP9J,EAAOoJ,EAAQW,UACN,KAAT/J,WAIA4J,IAAWd,EAAcM,EAAQS,oBAC3B,IAAIvK,MAAM,mDAAqDd,EAAKwL,OAAOZ,EAAQS,cAAe,WAIxGX,OACUD,KAECA,EAA6B,EAEpCjJ,QACC,IACSiK,EAAalN,KAAKwM,EAAS,KArHrB,4BAuHD,aAEd,IACSU,EAAaC,IAAIX,KA1HX,4BA4HD,aAEd,IACSU,EAAalN,KAAKwM,EAAS,KA9HtB,0BAgIA,aAEd,IACSU,EAAaC,IAAIX,KAnIZ,0BAqIA,aAEd,IAtIc,0BAwIA,aAEd,IAzIc,0BA2IA,aAEd,OACA,OAIA,IAhJa,kBAkJC,aAEd,OACGY,EAAgBZ,EAAUA,EAAQO,KAAO,IAGzCR,GAF4B,IAAlBa,EArJE,oBAEC,qBAsJF,aAEd,KAzJe,iBA2JD,KAInBnB,SACQhJ,QACC,KA9JW,+BAiKX,KAlKY,uBAuKrB0J,SAAW,IAAIf,EAAUE,EAAMuB,eAAgBhB,EAAQiB,gBAAiBf,EAAcC,KACtFE,OAAO1M,KAAK,CACZuN,WAAYV,EACZW,OAAQT,WAGTN,EA1LQZ,CAASH,EAAiBjK,EAAMqK,EAAOC,KAInD,IAWHmB,EAA8B,sBACR1B,EAAQuB,QACrBvB,OAASA,OACTuB,KAAOA,WAEHI,IAAM,SAAUX,UACrBA,EACOA,EAAQhB,OAEZ,QAEExL,KAAO,SAAUwM,EAASO,UAC5B,IAAIU,EAAajB,EAASO,MAExBW,OAAS,SAAUC,EAAGC,OAC1BD,IAAMC,SACA,MAEND,IAAMC,SACA,OAEJD,GAAKC,GAAG,IACPD,IAAMC,SACC,KAEPD,EAAEZ,OAASa,EAAEb,YACN,IAEPY,EAAEnC,SACFoC,EAAEpC,cAEH,GAEJiC,EAjCuB,GAmC9B7B,EAA2B,sBACRE,EAAOM,EAAWG,EAAcC,QAC1CqB,OAAS/B,OACTM,UAAYA,OACZG,aAAeA,OACfC,QAAUA,WAETtP,UAAU0P,MAAQ,kBACjB,IAAIkB,EAAUtR,KAAKqR,OAAQrR,KAAK4P,UAAW5P,KAAK+P,aAAc/P,KAAKgQ,YAEpEtP,UAAUwQ,OAAS,SAAUK,UAC/BA,IAAUvR,SAGTuR,gBAA4BD,KAGzBtR,KAAK4P,YAAc2B,EAAM3B,WAC7B5P,KAAK+P,eAAiBwB,EAAMxB,cAC5BW,EAAaQ,OAAOlR,KAAKgQ,QAASuB,EAAMvB,aAEtCtP,UAAUmQ,aAAe,kBACxB7Q,KAAKqR,UAEN3Q,UAAU8Q,aAAe,SAAUlC,QACpC+B,OAAS/B,GAEXgC,EA3BoB,GCnDxB,WAAmBxR,OAClB2R,EAAc,GACdC,EAAY,GACZ1P,EAAS,IAAInC,EAAcC,KACnB0D,KAAKxB,OACbmC,EAAS,mBACLwN,EAAO,GACF/P,EAAK,EAAGA,EAAKC,UAAUC,OAAQF,MAC/BA,GAAMC,UAAUD,UAElBI,EAAON,yBAAyBkQ,MAAM5P,EAAQ2P,qBAGjDvQ,EAAatB,EAASsB,WAAYyQ,EAAoB/R,EAASgS,oBACxDJ,GACPG,EAAkBE,2BACRvO,KAAKmD,EAAUqL,uCAAuC5Q,EAAY,IAAI6Q,EAAgD9N,KAEhI0N,EAAkBK,gCACR1O,KAAKmD,EAAUwL,4CAA4C/Q,EAAY,IAAIgR,EAAqDjO,KAE1I0N,EAAkBQ,mBACR7O,KAAKmD,EAAU2L,+BAA+BlR,EAAY,IAAImR,EAAmCpO,KAE3G0N,EAAkBW,UACRhP,KAAKmD,EAAU8L,sBAAsBrR,EAAY,IAAIsR,EAA8BvO,KAE7F0N,EAAkBc,mBACRnP,KAAKmD,EAAUiM,+BAA+BxR,EAAY,IAAIyR,EAAuC1O,KAE/G0N,EAAkB3B,UACR1M,KAAKmD,EAAUmM,kBAAkB1R,EAAY2R,GAA0B,KAEjFlB,EAAkBmB,UACRxP,KAAKmD,EAAUsM,sBAAsB7R,EAAY,IAAI8R,EAAsC/O,KAErG0N,EAAkBsB,iBACR3P,KAAKmD,EAAUyM,6BAA6BhS,EAAY,IAAIiS,EAAqClP,KAE3G0N,EAAkBvN,eACRd,KAAK,IAAI8P,EAAoClS,EAAY+C,EAAQrE,IAE3E+R,EAAkB9C,mBACRvL,KAAKmD,EAAU4M,+BAA+BnS,EAAY,IAAIoS,EAAuCrP,WAI3GX,KAAKmD,EAAU8M,yBAAyB3T,EAASsB,WAAYsS,QACrE5B,EAAoBhS,EAASgS,2BACxBtR,aAAY,SAAUmT,GACvBA,EAAY7B,oBAAsBA,MACd6B,EAAY7B,4BAI5BtO,KAAKoQ,EAAalC,IACvBkC,EAAanC,GAExB,WAAsBA,SACX,CAAE9Q,QAAS,kBAAqBkT,EAAWpC,KAEtD,WAAoBA,QACTA,EAAY3P,UACH6O,MAAMhQ,UAG1B,IAAI+S,EAAwB,CACxBI,YAAa,yCACbrE,SAAU,CACNsE,YAAa,KACbC,aAAc,CAAC,KAAM,OAEzBC,SAAU,CACN,CAAC,IAAK,KACN,CAAC,IAAK,MAEVC,iBAAkB,CACd,CAAEC,KAAM,IAAKC,MAAO,IAAKC,MAAO,CAAC,WACjC,CAAEF,KAAM,IAAKC,MAAO,IAAKC,MAAO,CAAC,WACjC,CAAEF,KAAM,IAAKC,MAAO,IAAKC,MAAO,CAAC"}