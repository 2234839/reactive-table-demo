{"version":3,"file":"htmlMode.8027ca4e.js","sources":["../../node_modules/monaco-editor/esm/vs/language/html/workerManager.js","../../node_modules/monaco-editor/esm/vs/language/html/languageFeatures.js","../../node_modules/monaco-editor/esm/vs/language/html/htmlMode.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { editor } from './fillers/monaco-editor-core.js';\r\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1000; // 2min\r\nvar WorkerManager = /** @class */ (function () {\r\n    function WorkerManager(defaults) {\r\n        var _this = this;\r\n        this._defaults = defaults;\r\n        this._worker = null;\r\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\r\n        this._lastUsedTime = 0;\r\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\r\n    }\r\n    WorkerManager.prototype._stopWorker = function () {\r\n        if (this._worker) {\r\n            this._worker.dispose();\r\n            this._worker = null;\r\n        }\r\n        this._client = null;\r\n    };\r\n    WorkerManager.prototype.dispose = function () {\r\n        clearInterval(this._idleCheckInterval);\r\n        this._configChangeListener.dispose();\r\n        this._stopWorker();\r\n    };\r\n    WorkerManager.prototype._checkIfIdle = function () {\r\n        if (!this._worker) {\r\n            return;\r\n        }\r\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n        if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\r\n            this._stopWorker();\r\n        }\r\n    };\r\n    WorkerManager.prototype._getClient = function () {\r\n        this._lastUsedTime = Date.now();\r\n        if (!this._client) {\r\n            this._worker = editor.createWebWorker({\r\n                // module that exports the create() method and returns a `HTMLWorker` instance\r\n                moduleId: 'vs/language/html/htmlWorker',\r\n                // passed in to the create() method\r\n                createData: {\r\n                    languageSettings: this._defaults.options,\r\n                    languageId: this._defaults.languageId\r\n                },\r\n                label: this._defaults.languageId\r\n            });\r\n            this._client = this._worker.getProxy();\r\n        }\r\n        return this._client;\r\n    };\r\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\r\n        var _this = this;\r\n        var resources = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            resources[_i] = arguments[_i];\r\n        }\r\n        var _client;\r\n        return this._getClient()\r\n            .then(function (client) {\r\n            _client = client;\r\n        })\r\n            .then(function (_) {\r\n            return _this._worker.withSyncedResources(resources);\r\n        })\r\n            .then(function (_) { return _client; });\r\n    };\r\n    return WorkerManager;\r\n}());\r\nexport { WorkerManager };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport * as htmlService from './_deps/vscode-html-languageservice/htmlLanguageService.js';\r\nimport { languages, editor, Uri, Range, MarkerSeverity } from './fillers/monaco-editor-core.js';\r\n// --- diagnostics --- ---\r\nvar DiagnosticsAdapter = /** @class */ (function () {\r\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\r\n        var _this = this;\r\n        this._languageId = _languageId;\r\n        this._worker = _worker;\r\n        this._disposables = [];\r\n        this._listener = Object.create(null);\r\n        var onModelAdd = function (model) {\r\n            var modeId = model.getModeId();\r\n            if (modeId !== _this._languageId) {\r\n                return;\r\n            }\r\n            var handle;\r\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\r\n                clearTimeout(handle);\r\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\r\n            });\r\n            _this._doValidate(model.uri, modeId);\r\n        };\r\n        var onModelRemoved = function (model) {\r\n            editor.setModelMarkers(model, _this._languageId, []);\r\n            var uriStr = model.uri.toString();\r\n            var listener = _this._listener[uriStr];\r\n            if (listener) {\r\n                listener.dispose();\r\n                delete _this._listener[uriStr];\r\n            }\r\n        };\r\n        this._disposables.push(editor.onDidCreateModel(onModelAdd));\r\n        this._disposables.push(editor.onWillDisposeModel(function (model) {\r\n            onModelRemoved(model);\r\n        }));\r\n        this._disposables.push(editor.onDidChangeModelLanguage(function (event) {\r\n            onModelRemoved(event.model);\r\n            onModelAdd(event.model);\r\n        }));\r\n        this._disposables.push(defaults.onDidChange(function (_) {\r\n            editor.getModels().forEach(function (model) {\r\n                if (model.getModeId() === _this._languageId) {\r\n                    onModelRemoved(model);\r\n                    onModelAdd(model);\r\n                }\r\n            });\r\n        }));\r\n        this._disposables.push({\r\n            dispose: function () {\r\n                for (var key in _this._listener) {\r\n                    _this._listener[key].dispose();\r\n                }\r\n            }\r\n        });\r\n        editor.getModels().forEach(onModelAdd);\r\n    }\r\n    DiagnosticsAdapter.prototype.dispose = function () {\r\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\r\n        this._disposables = [];\r\n    };\r\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\r\n        this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\r\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\r\n                var model = editor.getModel(resource);\r\n                if (model && model.getModeId() === languageId) {\r\n                    editor.setModelMarkers(model, languageId, markers);\r\n                }\r\n            });\r\n        })\r\n            .then(undefined, function (err) {\r\n            console.error(err);\r\n        });\r\n    };\r\n    return DiagnosticsAdapter;\r\n}());\r\nexport { DiagnosticsAdapter };\r\nfunction toSeverity(lsSeverity) {\r\n    switch (lsSeverity) {\r\n        case htmlService.DiagnosticSeverity.Error:\r\n            return MarkerSeverity.Error;\r\n        case htmlService.DiagnosticSeverity.Warning:\r\n            return MarkerSeverity.Warning;\r\n        case htmlService.DiagnosticSeverity.Information:\r\n            return MarkerSeverity.Info;\r\n        case htmlService.DiagnosticSeverity.Hint:\r\n            return MarkerSeverity.Hint;\r\n        default:\r\n            return MarkerSeverity.Info;\r\n    }\r\n}\r\nfunction toDiagnostics(resource, diag) {\r\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\r\n    return {\r\n        severity: toSeverity(diag.severity),\r\n        startLineNumber: diag.range.start.line + 1,\r\n        startColumn: diag.range.start.character + 1,\r\n        endLineNumber: diag.range.end.line + 1,\r\n        endColumn: diag.range.end.character + 1,\r\n        message: diag.message,\r\n        code: code,\r\n        source: diag.source\r\n    };\r\n}\r\n// --- completion ------\r\nfunction fromPosition(position) {\r\n    if (!position) {\r\n        return void 0;\r\n    }\r\n    return { character: position.column - 1, line: position.lineNumber - 1 };\r\n}\r\nfunction fromRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        start: fromPosition(range.getStartPosition()),\r\n        end: fromPosition(range.getEndPosition())\r\n    };\r\n}\r\nfunction toRange(range) {\r\n    if (!range) {\r\n        return void 0;\r\n    }\r\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\r\n}\r\nfunction isInsertReplaceEdit(edit) {\r\n    return (typeof edit.insert !== 'undefined' &&\r\n        typeof edit.replace !== 'undefined');\r\n}\r\nfunction toCompletionItemKind(kind) {\r\n    var mItemKind = languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case htmlService.CompletionItemKind.Text:\r\n            return mItemKind.Text;\r\n        case htmlService.CompletionItemKind.Method:\r\n            return mItemKind.Method;\r\n        case htmlService.CompletionItemKind.Function:\r\n            return mItemKind.Function;\r\n        case htmlService.CompletionItemKind.Constructor:\r\n            return mItemKind.Constructor;\r\n        case htmlService.CompletionItemKind.Field:\r\n            return mItemKind.Field;\r\n        case htmlService.CompletionItemKind.Variable:\r\n            return mItemKind.Variable;\r\n        case htmlService.CompletionItemKind.Class:\r\n            return mItemKind.Class;\r\n        case htmlService.CompletionItemKind.Interface:\r\n            return mItemKind.Interface;\r\n        case htmlService.CompletionItemKind.Module:\r\n            return mItemKind.Module;\r\n        case htmlService.CompletionItemKind.Property:\r\n            return mItemKind.Property;\r\n        case htmlService.CompletionItemKind.Unit:\r\n            return mItemKind.Unit;\r\n        case htmlService.CompletionItemKind.Value:\r\n            return mItemKind.Value;\r\n        case htmlService.CompletionItemKind.Enum:\r\n            return mItemKind.Enum;\r\n        case htmlService.CompletionItemKind.Keyword:\r\n            return mItemKind.Keyword;\r\n        case htmlService.CompletionItemKind.Snippet:\r\n            return mItemKind.Snippet;\r\n        case htmlService.CompletionItemKind.Color:\r\n            return mItemKind.Color;\r\n        case htmlService.CompletionItemKind.File:\r\n            return mItemKind.File;\r\n        case htmlService.CompletionItemKind.Reference:\r\n            return mItemKind.Reference;\r\n    }\r\n    return mItemKind.Property;\r\n}\r\nfunction fromCompletionItemKind(kind) {\r\n    var mItemKind = languages.CompletionItemKind;\r\n    switch (kind) {\r\n        case mItemKind.Text:\r\n            return htmlService.CompletionItemKind.Text;\r\n        case mItemKind.Method:\r\n            return htmlService.CompletionItemKind.Method;\r\n        case mItemKind.Function:\r\n            return htmlService.CompletionItemKind.Function;\r\n        case mItemKind.Constructor:\r\n            return htmlService.CompletionItemKind.Constructor;\r\n        case mItemKind.Field:\r\n            return htmlService.CompletionItemKind.Field;\r\n        case mItemKind.Variable:\r\n            return htmlService.CompletionItemKind.Variable;\r\n        case mItemKind.Class:\r\n            return htmlService.CompletionItemKind.Class;\r\n        case mItemKind.Interface:\r\n            return htmlService.CompletionItemKind.Interface;\r\n        case mItemKind.Module:\r\n            return htmlService.CompletionItemKind.Module;\r\n        case mItemKind.Property:\r\n            return htmlService.CompletionItemKind.Property;\r\n        case mItemKind.Unit:\r\n            return htmlService.CompletionItemKind.Unit;\r\n        case mItemKind.Value:\r\n            return htmlService.CompletionItemKind.Value;\r\n        case mItemKind.Enum:\r\n            return htmlService.CompletionItemKind.Enum;\r\n        case mItemKind.Keyword:\r\n            return htmlService.CompletionItemKind.Keyword;\r\n        case mItemKind.Snippet:\r\n            return htmlService.CompletionItemKind.Snippet;\r\n        case mItemKind.Color:\r\n            return htmlService.CompletionItemKind.Color;\r\n        case mItemKind.File:\r\n            return htmlService.CompletionItemKind.File;\r\n        case mItemKind.Reference:\r\n            return htmlService.CompletionItemKind.Reference;\r\n    }\r\n    return htmlService.CompletionItemKind.Property;\r\n}\r\nfunction toTextEdit(textEdit) {\r\n    if (!textEdit) {\r\n        return void 0;\r\n    }\r\n    return {\r\n        range: toRange(textEdit.range),\r\n        text: textEdit.newText\r\n    };\r\n}\r\nvar CompletionAdapter = /** @class */ (function () {\r\n    function CompletionAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\r\n        get: function () {\r\n            return ['.', ':', '<', '\"', '=', '/'];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doComplete(resource.toString(), fromPosition(position));\r\n        })\r\n            .then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            var wordInfo = model.getWordUntilPosition(position);\r\n            var wordRange = new Range(position.lineNumber, wordInfo.startColumn, position.lineNumber, wordInfo.endColumn);\r\n            var items = info.items.map(function (entry) {\r\n                var item = {\r\n                    label: entry.label,\r\n                    insertText: entry.insertText || entry.label,\r\n                    sortText: entry.sortText,\r\n                    filterText: entry.filterText,\r\n                    documentation: entry.documentation,\r\n                    detail: entry.detail,\r\n                    range: wordRange,\r\n                    kind: toCompletionItemKind(entry.kind)\r\n                };\r\n                if (entry.textEdit) {\r\n                    if (isInsertReplaceEdit(entry.textEdit)) {\r\n                        item.range = {\r\n                            insert: toRange(entry.textEdit.insert),\r\n                            replace: toRange(entry.textEdit.replace)\r\n                        };\r\n                    }\r\n                    else {\r\n                        item.range = toRange(entry.textEdit.range);\r\n                    }\r\n                    item.insertText = entry.textEdit.newText;\r\n                }\r\n                if (entry.additionalTextEdits) {\r\n                    item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\r\n                }\r\n                if (entry.insertTextFormat === htmlService.InsertTextFormat.Snippet) {\r\n                    item.insertTextRules = languages.CompletionItemInsertTextRule.InsertAsSnippet;\r\n                }\r\n                return item;\r\n            });\r\n            return {\r\n                isIncomplete: info.isIncomplete,\r\n                suggestions: items\r\n            };\r\n        });\r\n    };\r\n    return CompletionAdapter;\r\n}());\r\nexport { CompletionAdapter };\r\n// --- hover ------\r\nfunction isMarkupContent(thing) {\r\n    return (thing &&\r\n        typeof thing === 'object' &&\r\n        typeof thing.kind === 'string');\r\n}\r\nfunction toMarkdownString(entry) {\r\n    if (typeof entry === 'string') {\r\n        return {\r\n            value: entry\r\n        };\r\n    }\r\n    if (isMarkupContent(entry)) {\r\n        if (entry.kind === 'plaintext') {\r\n            return {\r\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\r\n            };\r\n        }\r\n        return {\r\n            value: entry.value\r\n        };\r\n    }\r\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\r\n}\r\nfunction toMarkedStringArray(contents) {\r\n    if (!contents) {\r\n        return void 0;\r\n    }\r\n    if (Array.isArray(contents)) {\r\n        return contents.map(toMarkdownString);\r\n    }\r\n    return [toMarkdownString(contents)];\r\n}\r\nvar HoverAdapter = /** @class */ (function () {\r\n    function HoverAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    HoverAdapter.prototype.provideHover = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doHover(resource.toString(), fromPosition(position));\r\n        })\r\n            .then(function (info) {\r\n            if (!info) {\r\n                return;\r\n            }\r\n            return {\r\n                range: toRange(info.range),\r\n                contents: toMarkedStringArray(info.contents)\r\n            };\r\n        });\r\n    };\r\n    return HoverAdapter;\r\n}());\r\nexport { HoverAdapter };\r\n// --- document highlights ------\r\nfunction toHighlighKind(kind) {\r\n    var mKind = languages.DocumentHighlightKind;\r\n    switch (kind) {\r\n        case htmlService.DocumentHighlightKind.Read:\r\n            return mKind.Read;\r\n        case htmlService.DocumentHighlightKind.Write:\r\n            return mKind.Write;\r\n        case htmlService.DocumentHighlightKind.Text:\r\n            return mKind.Text;\r\n    }\r\n    return mKind.Text;\r\n}\r\nvar DocumentHighlightAdapter = /** @class */ (function () {\r\n    function DocumentHighlightAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentHighlightAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.findDocumentHighlights(resource.toString(), fromPosition(position)); })\r\n            .then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                range: toRange(item.range),\r\n                kind: toHighlighKind(item.kind)\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentHighlightAdapter;\r\n}());\r\nexport { DocumentHighlightAdapter };\r\n// --- document symbols ------\r\nfunction toSymbolKind(kind) {\r\n    var mKind = languages.SymbolKind;\r\n    switch (kind) {\r\n        case htmlService.SymbolKind.File:\r\n            return mKind.Array;\r\n        case htmlService.SymbolKind.Module:\r\n            return mKind.Module;\r\n        case htmlService.SymbolKind.Namespace:\r\n            return mKind.Namespace;\r\n        case htmlService.SymbolKind.Package:\r\n            return mKind.Package;\r\n        case htmlService.SymbolKind.Class:\r\n            return mKind.Class;\r\n        case htmlService.SymbolKind.Method:\r\n            return mKind.Method;\r\n        case htmlService.SymbolKind.Property:\r\n            return mKind.Property;\r\n        case htmlService.SymbolKind.Field:\r\n            return mKind.Field;\r\n        case htmlService.SymbolKind.Constructor:\r\n            return mKind.Constructor;\r\n        case htmlService.SymbolKind.Enum:\r\n            return mKind.Enum;\r\n        case htmlService.SymbolKind.Interface:\r\n            return mKind.Interface;\r\n        case htmlService.SymbolKind.Function:\r\n            return mKind.Function;\r\n        case htmlService.SymbolKind.Variable:\r\n            return mKind.Variable;\r\n        case htmlService.SymbolKind.Constant:\r\n            return mKind.Constant;\r\n        case htmlService.SymbolKind.String:\r\n            return mKind.String;\r\n        case htmlService.SymbolKind.Number:\r\n            return mKind.Number;\r\n        case htmlService.SymbolKind.Boolean:\r\n            return mKind.Boolean;\r\n        case htmlService.SymbolKind.Array:\r\n            return mKind.Array;\r\n    }\r\n    return mKind.Function;\r\n}\r\nvar DocumentSymbolAdapter = /** @class */ (function () {\r\n    function DocumentSymbolAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentSymbolAdapter.prototype.provideDocumentSymbols = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.findDocumentSymbols(resource.toString()); })\r\n            .then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return items.map(function (item) { return ({\r\n                name: item.name,\r\n                detail: '',\r\n                containerName: item.containerName,\r\n                kind: toSymbolKind(item.kind),\r\n                tags: [],\r\n                range: toRange(item.location.range),\r\n                selectionRange: toRange(item.location.range)\r\n            }); });\r\n        });\r\n    };\r\n    return DocumentSymbolAdapter;\r\n}());\r\nexport { DocumentSymbolAdapter };\r\nvar DocumentLinkAdapter = /** @class */ (function () {\r\n    function DocumentLinkAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentLinkAdapter.prototype.provideLinks = function (model, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.findDocumentLinks(resource.toString()); })\r\n            .then(function (items) {\r\n            if (!items) {\r\n                return;\r\n            }\r\n            return {\r\n                links: items.map(function (item) { return ({\r\n                    range: toRange(item.range),\r\n                    url: item.target\r\n                }); })\r\n            };\r\n        });\r\n    };\r\n    return DocumentLinkAdapter;\r\n}());\r\nexport { DocumentLinkAdapter };\r\nfunction fromFormattingOptions(options) {\r\n    return {\r\n        tabSize: options.tabSize,\r\n        insertSpaces: options.insertSpaces\r\n    };\r\n}\r\nvar DocumentFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker\r\n                .format(resource.toString(), null, fromFormattingOptions(options))\r\n                .then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentFormattingEditProvider;\r\n}());\r\nexport { DocumentFormattingEditProvider };\r\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\r\n    function DocumentRangeFormattingEditProvider(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource).then(function (worker) {\r\n            return worker\r\n                .format(resource.toString(), fromRange(range), fromFormattingOptions(options))\r\n                .then(function (edits) {\r\n                if (!edits || edits.length === 0) {\r\n                    return;\r\n                }\r\n                return edits.map(toTextEdit);\r\n            });\r\n        });\r\n    };\r\n    return DocumentRangeFormattingEditProvider;\r\n}());\r\nexport { DocumentRangeFormattingEditProvider };\r\nvar RenameAdapter = /** @class */ (function () {\r\n    function RenameAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    RenameAdapter.prototype.provideRenameEdits = function (model, position, newName, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) {\r\n            return worker.doRename(resource.toString(), fromPosition(position), newName);\r\n        })\r\n            .then(function (edit) {\r\n            return toWorkspaceEdit(edit);\r\n        });\r\n    };\r\n    return RenameAdapter;\r\n}());\r\nexport { RenameAdapter };\r\nfunction toWorkspaceEdit(edit) {\r\n    if (!edit || !edit.changes) {\r\n        return void 0;\r\n    }\r\n    var resourceEdits = [];\r\n    for (var uri in edit.changes) {\r\n        var _uri = Uri.parse(uri);\r\n        for (var _i = 0, _a = edit.changes[uri]; _i < _a.length; _i++) {\r\n            var e = _a[_i];\r\n            resourceEdits.push({\r\n                resource: _uri,\r\n                edit: {\r\n                    range: toRange(e.range),\r\n                    text: e.newText\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return {\r\n        edits: resourceEdits\r\n    };\r\n}\r\nvar FoldingRangeAdapter = /** @class */ (function () {\r\n    function FoldingRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    FoldingRangeAdapter.prototype.provideFoldingRanges = function (model, context, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.getFoldingRanges(resource.toString(), context); })\r\n            .then(function (ranges) {\r\n            if (!ranges) {\r\n                return;\r\n            }\r\n            return ranges.map(function (range) {\r\n                var result = {\r\n                    start: range.startLine + 1,\r\n                    end: range.endLine + 1\r\n                };\r\n                if (typeof range.kind !== 'undefined') {\r\n                    result.kind = toFoldingRangeKind(range.kind);\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return FoldingRangeAdapter;\r\n}());\r\nexport { FoldingRangeAdapter };\r\nfunction toFoldingRangeKind(kind) {\r\n    switch (kind) {\r\n        case htmlService.FoldingRangeKind.Comment:\r\n            return languages.FoldingRangeKind.Comment;\r\n        case htmlService.FoldingRangeKind.Imports:\r\n            return languages.FoldingRangeKind.Imports;\r\n        case htmlService.FoldingRangeKind.Region:\r\n            return languages.FoldingRangeKind.Region;\r\n    }\r\n}\r\nvar SelectionRangeAdapter = /** @class */ (function () {\r\n    function SelectionRangeAdapter(_worker) {\r\n        this._worker = _worker;\r\n    }\r\n    SelectionRangeAdapter.prototype.provideSelectionRanges = function (model, positions, token) {\r\n        var resource = model.uri;\r\n        return this._worker(resource)\r\n            .then(function (worker) { return worker.getSelectionRanges(resource.toString(), positions.map(fromPosition)); })\r\n            .then(function (selectionRanges) {\r\n            if (!selectionRanges) {\r\n                return;\r\n            }\r\n            return selectionRanges.map(function (selectionRange) {\r\n                var result = [];\r\n                while (selectionRange) {\r\n                    result.push({ range: toRange(selectionRange.range) });\r\n                    selectionRange = selectionRange.parent;\r\n                }\r\n                return result;\r\n            });\r\n        });\r\n    };\r\n    return SelectionRangeAdapter;\r\n}());\r\nexport { SelectionRangeAdapter };\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nimport { WorkerManager } from './workerManager.js';\r\nimport * as languageFeatures from './languageFeatures.js';\r\nimport { languages } from './fillers/monaco-editor-core.js';\r\nexport function setupMode1(defaults) {\r\n    var client = new WorkerManager(defaults);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    var languageId = defaults.languageId;\r\n    // all modes\r\n    languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker));\r\n    languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker));\r\n    languages.registerDocumentHighlightProvider(languageId, new languageFeatures.DocumentHighlightAdapter(worker));\r\n    languages.registerLinkProvider(languageId, new languageFeatures.DocumentLinkAdapter(worker));\r\n    languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker));\r\n    languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker));\r\n    languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker));\r\n    languages.registerRenameProvider(languageId, new languageFeatures.RenameAdapter(worker));\r\n    // only html\r\n    if (languageId === 'html') {\r\n        languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker));\r\n        languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker));\r\n        new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults);\r\n    }\r\n}\r\nexport function setupMode(defaults) {\r\n    var disposables = [];\r\n    var providers = [];\r\n    var client = new WorkerManager(defaults);\r\n    disposables.push(client);\r\n    var worker = function () {\r\n        var uris = [];\r\n        for (var _i = 0; _i < arguments.length; _i++) {\r\n            uris[_i] = arguments[_i];\r\n        }\r\n        return client.getLanguageServiceWorker.apply(client, uris);\r\n    };\r\n    function registerProviders() {\r\n        var languageId = defaults.languageId, modeConfiguration = defaults.modeConfiguration;\r\n        disposeAll(providers);\r\n        if (modeConfiguration.completionItems) {\r\n            providers.push(languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.hovers) {\r\n            providers.push(languages.registerHoverProvider(languageId, new languageFeatures.HoverAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.documentHighlights) {\r\n            providers.push(languages.registerDocumentHighlightProvider(languageId, new languageFeatures.DocumentHighlightAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.links) {\r\n            providers.push(languages.registerLinkProvider(languageId, new languageFeatures.DocumentLinkAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.documentSymbols) {\r\n            providers.push(languages.registerDocumentSymbolProvider(languageId, new languageFeatures.DocumentSymbolAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.rename) {\r\n            providers.push(languages.registerRenameProvider(languageId, new languageFeatures.RenameAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.foldingRanges) {\r\n            providers.push(languages.registerFoldingRangeProvider(languageId, new languageFeatures.FoldingRangeAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.selectionRanges) {\r\n            providers.push(languages.registerSelectionRangeProvider(languageId, new languageFeatures.SelectionRangeAdapter(worker)));\r\n        }\r\n        if (modeConfiguration.documentFormattingEdits) {\r\n            providers.push(languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.documentRangeFormattingEdits) {\r\n            providers.push(languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker)));\r\n        }\r\n        if (modeConfiguration.diagnostics) {\r\n            providers.push(new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults));\r\n        }\r\n    }\r\n    registerProviders();\r\n    disposables.push(asDisposable(providers));\r\n    return asDisposable(disposables);\r\n}\r\nfunction asDisposable(disposables) {\r\n    return { dispose: function () { return disposeAll(disposables); } };\r\n}\r\nfunction disposeAll(disposables) {\r\n    while (disposables.length) {\r\n        disposables.pop().dispose();\r\n    }\r\n}\r\n"],"names":["WorkerManager","defaults","_this","this","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","Date","now","_getClient","editor","createWebWorker","moduleId","createData","languageSettings","options","languageId","label","getProxy","getLanguageServiceWorker","resources","_i","arguments","length","then","client","_","withSyncedResources","WorkerManager2","DiagnosticsAdapter","_languageId","_disposables","_listener","Object","create","onModelAdd","model","handle","modeId","getModeId","uri","toString","onDidChangeContent","setTimeout","_doValidate","onModelRemoved","setModelMarkers","uriStr","listener","push","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","event","getModels","forEach","key","d","resource","worker","doValidation","diagnostics","markers","map","code","diag","String","severity","toSeverity","startLineNumber","range","start","line","startColumn","character","endLineNumber","end","endColumn","message","source","getModel","err","error","DiagnosticsAdapter2","lsSeverity","htmlService.DiagnosticSeverity","Error","MarkerSeverity","Warning","Information","Info","Hint","position","column","lineNumber","Range","kind","mItemKind","languages","CompletionItemKind","htmlService.CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","textEdit","toRange","text","newText","CompletionAdapter","defineProperty","CompletionAdapter2","get","enumerable","configurable","provideCompletionItems","context","token","doComplete","fromPosition","info","wordInfo","getWordUntilPosition","wordRange","items","entry","edit","item","insertText","sortText","filterText","documentation","detail","toCompletionItemKind","insert","replace","additionalTextEdits","toTextEdit","insertTextFormat","htmlService.InsertTextFormat","insertTextRules","CompletionItemInsertTextRule","InsertAsSnippet","isIncomplete","suggestions","value","thing","language","contents","Array","isArray","toMarkdownString","HoverAdapter","provideHover","doHover","toMarkedStringArray","HoverAdapter2","mKind","DocumentHighlightKind","htmlService.DocumentHighlightKind","Read","Write","DocumentHighlightAdapter","provideDocumentHighlights","findDocumentHighlights","toHighlighKind","DocumentHighlightAdapter2","SymbolKind","htmlService.SymbolKind","Namespace","Package","Constant","Number","Boolean","DocumentSymbolAdapter","provideDocumentSymbols","findDocumentSymbols","name","containerName","toSymbolKind","tags","location","selectionRange","DocumentSymbolAdapter2","DocumentLinkAdapter","provideLinks","findDocumentLinks","links","url","target","DocumentLinkAdapter2","tabSize","insertSpaces","DocumentFormattingEditProvider","provideDocumentFormattingEdits","format","fromFormattingOptions","edits","DocumentFormattingEditProvider2","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","getStartPosition","getEndPosition","fromRange","DocumentRangeFormattingEditProvider2","RenameAdapter","provideRenameEdits","newName","doRename","changes","resourceEdits","_uri","Uri","parse","_a","e","toWorkspaceEdit","RenameAdapter2","FoldingRangeAdapter","provideFoldingRanges","getFoldingRanges","ranges","result","startLine","endLine","htmlService.FoldingRangeKind","Comment","FoldingRangeKind","Imports","Region","toFoldingRangeKind","FoldingRangeAdapter2","SelectionRangeAdapter","provideSelectionRanges","positions","getSelectionRanges","selectionRanges","parent","SelectionRangeAdapter2","uris","apply","registerCompletionItemProvider","languageFeatures.CompletionAdapter","registerHoverProvider","languageFeatures.HoverAdapter","registerDocumentHighlightProvider","languageFeatures.DocumentHighlightAdapter","registerLinkProvider","languageFeatures.DocumentLinkAdapter","registerFoldingRangeProvider","languageFeatures.FoldingRangeAdapter","registerDocumentSymbolProvider","languageFeatures.DocumentSymbolAdapter","registerSelectionRangeProvider","languageFeatures.SelectionRangeAdapter","registerRenameProvider","languageFeatures.RenameAdapter","registerDocumentFormattingEditProvider","languageFeatures.DocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","languageFeatures.DocumentRangeFormattingEditProvider","languageFeatures.DiagnosticsAdapter","disposables","providers","modeConfiguration","completionItems","hovers","documentHighlights","documentSymbols","rename","foldingRanges","documentFormattingEdits","documentRangeFormattingEdits","asDisposable","disposeAll","pop"],"mappings":"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"}